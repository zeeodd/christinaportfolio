var svg=d3.select("svg"),width=+svg.attr("width"),height=+svg.attr("height"),color=d3.scaleOrdinal(d3.schemeCategory10),simulation=d3.forceSimulation().force("link",d3.forceLink().id(function(t){return t.id})).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(width/2,height/2));function dragstarted(t){d3.event.active||simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function dragged(t){t.fx=d3.event.x,t.fy=d3.event.y}function dragended(t){d3.event.active||simulation.alphaTarget(0),t.fx=null,t.fy=null}d3.json("scripts/graph.json",function(t,e){if(t)throw t;console.log(e);var n=svg.append("g").attr("class","links").selectAll("line").data(e.links).enter().append("line").attr("stroke-width",function(t){return Math.sqrt(t.value)}),r=d3.select("body").append("div").attr("class","graph-tooltip").style("opacity",0),o=svg.append("g").attr("class","nodes").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",10).attr("fill",function(t){return color(t.id)}).call(d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended)).on("mouseover",function(t){r.transition().duration(100).style("opacity",.9).style("display","block"),r.html(t.name).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+25+"px").style("color",color(t.id)).style("line-height","1").style("font-size","8"),d3.select(this).style("cursor","pointer"),d3.select(this).attr("r",12.5)}).on("mouseout",function(t){r.transition().duration(100).style("opacity",0).style("display","none"),d3.select(this).style("cursor","normal"),d3.select(this).attr("r",10)}).on("click",function(t){window.open(t.url,"_blank"),d3.select(window).on("click",function(){zoom(root)}),r.transition().duration(100).style("opacity",0).style("display","none"),d3.select(this).style("cursor","normal"),d3.select(this).attr("r",10)});o.append("title").text(function(t){return t.id}),simulation.nodes(e.nodes).on("tick",function(){n.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),o.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y})}),simulation.force("link").links(e.links)});
